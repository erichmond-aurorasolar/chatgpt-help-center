Global MPPT and Bypass Diodes

Global maximum power point tracking (MPPT) refers to an inverter's ability to periodically sweep the full current-voltage (IV) curve of a solar array to find the operating point at which the array produces the most power. This functionality, in conjunction with bypass diodes inside the solar panels, can have a significant impact on the energy production for installations under partial shading. This article covers the concepts of global MPPT and bypass diodes and explains how Aurora implements these features.
Bypass Diodes
In string inverter designs, the module capable of producing the least amount of current—due to shading, soiling, or generally lower irradiance—limits the current of the entire string. This is because modules connected in series must carry the same amount of current, and if one module cannot produce as much current as another, then the string current can be no higher than that which the weakest module can output. This effectively brings the “strongest” modules off their maximum power points, resulting in less overall energy than they are capable of producing in isolation.
To mitigate this, many module manufacturers integrate bypass diodes into their solar panels.To explain how this works, let us first examine how bypass diodes would work if they were applied at the module-level; once we understand the basic concept, we will apply it to how bypass diodes operate when they are connected at a submodule level. Consider Fig. 1, where a single bypass diode is placed in parallel with every module in a string. If only one module is shaded, its parallel diode allows the module to be bypassed so the higher current of the unshaded modules can flow without being brought down by the shaded module. The weaker module is effectively shorted out. This frequently results in higher array output power; as an example, consider a case where nine out of ten modules are capable of outputting 8 A of current at a voltage of 32.5 V, but one of the ten modules is shaded and can only produce 1 A at about the same voltage. If the weak module is not bypassed, then the total output power is roughly 10 * 32.5 V * 1 A = 325 W, because the entire string is forced to operate at the lowest current (note that this assumes the unshaded modules still operate at 32.5 V; in reality they will operate closer to their open circuit voltage). If, however, we can bypass the shaded module, then the total output power becomes 9*32.5 V*8 A = 2,340 W, excluding the small power loss due to the diode voltage drop. This is clearly a case in which we want to bypass the shaded module and operate at a higher current.

Fig. 1: Illustration of bypass diodes in parallel with every module in a string. The positive terminal of the diode (anode) is connected to the negative terminal of the module, and the negative terminal of the diode (cathode) is connected to the positive terminal of the module.
Global MPPT
Solar panel current-voltage (IV) and power-voltage (PV) curves in shaded conditions reflect all possible operating points (in our simple case, low current and high current). Fig. 2 shows an example of this, where a “global” maximum power point is found when the array operates at a higher current and lower voltage (≈22 V), and where a “local” maximum power point is found when the array operates at a lower current and higher voltage (≈38 V); the former occurs when the bypass diode of the shaded module is “activated” and the latter occurs when the bypass diode of the shaded module is not carrying any current. By setting the operating voltage of the string, the inverter can decide which point to operate at.

Fig. 2: (left) IV (blue) and PV (red) curve of a solar array with no shading; (right) IV (blue) and PV (red) curve of a solar array with shading, where the activation of bypass diodes results in multiple possible operating points. Image source: Digikey
Not all inverters that perform maximum power point tracking (MPPT) are capable of searching the entire IV curve to find the operating point that results in the highest possible power, where some modules may be bypassed. Some inverters are limited to only search for the maximum power point in a local region where it “usually” lies - this is typically the high voltage solution where no modules are bypassed, and as a result, this “maximum power point” is potentially not the global optimum that results in the greatest possible output power. Most modern residential inverters are capable of global maximum power point tracking because shading due to trees and obstructions is common and expected; large commercial inverters for ground mounts, however, may not have this functionality because it is generally assumed there is not much shading.
Aurora’s component database has been updated to reflect which inverters are capable of scanning the IV curve to find the highest possible output power. When you run an Aurora performance simulation with an inverter that has “Global MPPT” functionality (Fig. 3), Aurora will locate a global maximum power point where weaker modules may be bypassed. If a module is bypassed, Aurora models a typical diode voltage drop of 0.7 V per bypass diode, depending on the current through the diode. Modules in Aurora’s component database have also been updated to include information regarding how many bypass diodes are integrated in a single module; if a module contains three bypass diodes and ends up being bypassed, there will consequently be a voltage drop of 2.1 V across the module. The diode voltage drop multiplied by the string current is the power loss associated with activating the bypass diode. This power loss is automatically taken into account in Aurora’s performance estimate. The efficiency of the MPPT in finding the global maximum power point, which includes how much time the MPPT spends searching for the maximum power and not actually operating there, is not taken into account. If the inverter supports “global” maximum power point tracking, it is assumed that the inverter operates at the global maximum power point for the entire simulation step of one hour.

Fig. 3: Example of an inverter in Aurora’s component database with “Global MPPT” functionality.
For the time being, only inverters provided in Aurora’s component database with global MPPT functionality will be able to simulate bypass diodes. You will not be able to simulate global MPPT with custom components.
Impact on Energy Production

For sites with heavy shading from obstructions, trees, and buildings, an inverter with global MPPT functionality is likely to yield higher overall production than an inverter that does not have this functionality. Sites without shading will generally not perform differently regardless of whether or not the inverter has global max power tracking because with no shading there is no reason to bypass modules.
In some cases, it is never optimal for bypass diodes to be activated. If, for example, one string in a design with many parallel strings is shaded, then lowering the voltage of the shaded string by bypassing modules lowers the voltage across all parallel strings, because parallel strings must have the same voltage. This effectively takes the “good” strings off their maximum power points and could result in less total output power than in the scenario in which the shaded modules are not bypassed.
In rare instances, you may find higher overall production when not simulating bypass diodes, or using an inverter without global maximum power point tracking. This is because it is possible for inverters—in both the real world and in simulation—to get stuck in regions with a local maximum on the power-voltage curve.
Bypass diodes are not a replacement for module-level power electronics, such as DC optimizers or microinverters. At best, a bypass diode will effectively zero out the power contribution of a module. A DC optimizer or microinverter, however, will still harvest as much energy as possible from a shaded module without affecting the operating points of other modules in your design.

 